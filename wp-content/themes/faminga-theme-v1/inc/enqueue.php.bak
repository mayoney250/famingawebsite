<?php
declare(strict_types=1);

/**
 * Enqueue scripts and styles.
 *
 * @return void
 */
function faminga_theme_v1_enqueue_assets(): void {
    // Main Stylesheet
    wp_enqueue_style( 'faminga-theme-v1-style', get_stylesheet_uri(), [], filemtime(get_stylesheet_directory() . '/style.css') );
    
    // Google Fonts
    wp_enqueue_style( 'faminga-theme-v1-fonts', 'https://fonts.googleapis.com/css2?family=Pacifico&display=swap', [], null );

    // Remix Icons
    wp_enqueue_style( 'faminga-theme-v1-remix-icons', 'https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css', [], '4.2.0' );
    
    // Font Awesome
    wp_enqueue_style( 'faminga-theme-v1-fontawesome', 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css', [], '6.5.1' );

    // TailwindCSS
    wp_enqueue_script( 'faminga-theme-v1-tailwind', 'https://cdn.tailwindcss.com', [], null, false );
    
    // ECharts for graphs
    wp_enqueue_script( 'faminga-theme-v1-echarts', 'https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js', [], '5.5.0', true );

    // Main JS file (for custom scripts like the chart)
    $main_js_path = get_template_directory() . '/assets/js/main.js';
    if (file_exists($main_js_path)) {
        wp_enqueue_script( 'faminga-theme-v1-scripts', get_template_directory_uri() . '/assets/js/main.js', ['jquery', 'faminga-theme-v1-echarts'], filemtime($main_js_path), true );
    }

    // Navigation JS for smooth scrolling
    $nav_js_path = get_template_directory() . '/assets/js/navigation.js';
    if (file_exists($nav_js_path)) {
        wp_enqueue_script( 'faminga-theme-v1-navigation', get_template_directory_uri() . '/assets/js/navigation.js', [], filemtime($nav_js_path), true );
    }

    // Demo Request Form JS - this will be conditionally loaded on the demo request page
    $demo_js_path = get_template_directory() . '/assets/js/demo-form.js';
    if (file_exists($demo_js_path)) {
        wp_register_script('faminga-demo-form', get_template_directory_uri() . '/assets/js/demo-form.js', ['jquery'], filemtime($demo_js_path), true);
    }
    
    // Career Filters JS - this will be conditionally loaded on the career page
    $career_js_path = get_template_directory() . '/assets/js/career-filters.js';
    if (file_exists($career_js_path)) {
        wp_register_script('faminga-career-filters', get_template_directory_uri() . '/assets/js/career-filters.js', [], filemtime($career_js_path), true);
    }
}
add_action('wp_enqueue_scripts', 'faminga_theme_v1_enqueue_assets');

/**
 * Add the TailwindCSS config to the head.
 * This is necessary when using the CDN version.
 */
function faminga_theme_v1_add_head_scripts(): void {
    ?>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#F26B3A',
                        'dark-green': '#0A1A0F',
                    },
                    borderRadius: {
                        'none': '0px',
                        'sm': '4px',
                        'DEFAULT': '8px',
                        'md': '12px',
                        'lg': '16px',
                        'xl': '20px',
                        '2xl': '24px',
                        '3xl': '32px',
                        'full': '9999px',
                        'button': '8px'
                    }
                }
            }
        }
    </script>
    <style>
        :where([class^="ri-"])::before { content: "\f3c2"; } /* Remix icon fix */
    </style>
    <?php
}
add_action('wp_head', 'faminga_theme_v1_add_head_scripts'); 